# 1. 基本功能

- 只有当第一次打开的时候将层级渲染。当前渲染的层级不统计 `display:none` 的元素，同时也不统计 `iframe` 里边的元素。
- 可以将当前页面所有元素按照对应层级显示出来。
  - 预计是用 css3 的 `transform: translateZ` 来实现
- 图形可上下左右旋转。
- 显示图形可放大和缩小。
- 支持当前图层信息展示内容。（遍历过程中记录，可异步，需要维护一个异步队列。）
  - 当前图层内容需要在下方容器中展示，不可出现`title`提示。避免信息量过多，影响查看。
- 鼠标划入显示可查看信息的 `title` 提示，提示内容 `点击查看图层信息`

## 2. 生命周期

**说明:**

生命周期不对外提供，但是需要在开发过程中将生命周期设置好，方便之后的开发和维护，每个生命周期应该做什么要具体明确好。

## 3. 具体实现

- 在打开本工具的时候，首先获取到当前页面中的页面结构。
- 解析当前页面结构，将页面结构层层拆解，放入到一个数组中。并根据当前dom的层级来指定渲染后所在层级。
- 根据数组的顺序绘图（3D绘图）。
- 绘图过程需要注意的是 `z-index` 的计算和 `transform: translateZ` 的计算，因为这两个属性会影响到当前元素所在层级。

## 4. 拓展

- 因为本工具只针对于dom结构，所以不论是在浏览器中还是其他dom结构的内容。都可以使用本工具，唯一不同的是在非浏览器情况下使用，需要提供一个可视化页面来查看。

## 5. 相关资料
[自动打开编辑器文件](https://juejin.cn/post/6901466406823575560) 

## 6. 具体实现方案
### 6.1 主要方法及注意事项

1. 对外暴露一个方法作为工具主方法，接收一个html字符串
2. 默认渲染`3(可调整，框架中动不动就嵌套好几层)`个层级的内容。如果渲染的层级过多，会导致工具性能问题。

### 6.2 方法执行过程

1. 首先将html字符串经过处理，生成一个N层级的新内容。并通过配置提取对应层级的内容。
2. html字符串解析为以下格式的数据
```javascript
[
  {
    type: 'html',
    info: {}, // 标签信息
    children: [
      {
        type: 'div1',
        info: {},
        children: [
          {
            type: 'div2',
            info: {},
            children: [],
          }
        ]
      },
      {
        type: 'div3',
        info: {},
        children: [],
      }
    ],
  },
  {},
]
```

3. 解析完成后，将得到的内容在本层级内进行z-index排序。
> 1. 注意需要对比translateZ和z-index的对比关系。translateZ要有比z-index更高的优先级。
> 2. 需要先根据translateZ排序，然后再根据z-index
>排序。
4. 排序完成，提取 N 个层级的内容进行渲染，只渲染边框和底色内容。附着当前标签的基础信息。用于鼠标移入获取。渲染过程中，需要制定一个基础页面，然后将层级按照自己的所在位置进行 z 轴上的移动。
5. 显示容器支持多角度旋转。（注意修改旋转中心）
### 6.3 预留生命周期钩子
1. 解析之前
    - beforeParsing
2. 解析之后
    - afterParsing
3. 渲染前
    - beforeRender
4. 渲染后
    - afterRender
5. 先提供生命周期空函数，看下之后的开发中是否可用。


### 6.4 之后再考虑对react和vue、angular等框架的支持。
需要对三个框架的源码进行解读，然后寻找到对应的解析时机和对应的解析参数。
